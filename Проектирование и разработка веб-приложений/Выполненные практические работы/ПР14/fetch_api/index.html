<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>ПР14 — Fetch API (старый браузер)</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header><h1>Практическая работа №14: Fetch API</h1></header>
  <main>
    <section>
      <h2>Часть 2: GET / POST / PUT / DELETE</h2>
      <button id="fetch-get">GET /posts/1</button>
      <button id="fetch-json">GET /users → карточки</button>
      <button id="fetch-error">GET /404 → ошибка</button>
      <div id="get-output"></div>
      <div id="get-data"></div>
    </section>

    <section>
      <h2>CRUD</h2>
      <button id="fetch-post">POST /posts</button>
      <button id="fetch-put">PUT /posts/1</button>
      <button id="fetch-patch">PATCH /posts/1</button>
      <button id="fetch-delete">DELETE /posts/1</button>
      <div id="crud-output"></div>
    </section>

    <section>
      <h2>Часть 3: Заголовки, параметры, таймаут</h2>
      <button id="fetch-headers">Заголовки</button>
      <button id="fetch-auth">Авторизация</button>
      <button id="fetch-params">Параметры (_limit=5)</button>
      <button id="fetch-timeout">Таймаут (3 сек)</button>
      <div id="headers-output"></div>
    </section>

    <section>
      <h2>Часть 4: Обработка ответов</h2>
      <button id="fetch-status">Статус</button>
      <button id="fetch-read-headers">Заголовки ответа</button>
      <button id="fetch-blob">Blob (изображение)</button>
      <button id="fetch-formdata">FormData</button>
      <div id="response-output"></div>
      <div id="image-container"></div>
    </section>

    <section>
      <h2>Часть 5: Ошибки и отмена</h2>
      <button id="fetch-net-error">Сетевая ошибка</button>
      <button id="fetch-http-error">HTTP 404</button>
      <button id="fetch-abort">Отмена</button>
      <button id="fetch-retry">Повтор ×3</button>
      <div id="error-output"></div>
    </section>

    <section>
      <h2>Часть 6: Параллельные запросы</h2>
      <button id="fetch-promise-all">Promise.all</button>
      <button id="fetch-promise-race">Promise.race</button>
      <button id="fetch-sequential">Последовательно</button>
      <div id="parallel-output"></div>
    </section>

    <section>
      <h2>Часть 7: Реальные сценарии</h2>
      <button id="fetch-user-posts">Пользователь + посты</button>
      <button id="fetch-search">Поиск</button>
      <button id="fetch-cache">Кэширование</button>
      <div id="real-output"></div>
    </section>
  </main>

  <!-- СКРИПТ В КОНЦЕ — ГАРАНТИЯ РАБОТОСПОСОБНОСТИ -->
  <script>
    // Полифилл AbortController для старых браузеров
    if (typeof AbortController === 'undefined') {
      window.AbortController = function() {
        this.signal = { aborted: false, onabort: null };
        this.abort = function() {
          this.signal.aborted = true;
          if (this.signal.onabort) this.signal.onabort(new Error('Aborted'));
        };
      };
    }
  </script>
  <script src="fetch-tasks.js"></script>
</body>
</html>